<!--
  @description       : 
  @author            : Sathish Rajalingam
  @group             : 
  @last modified on  : 08-07-2021
  @last modified by  : SF Developer
  Modifications Log 
  Ver   Date         Author               Modification
  1.0   06-16-2021   Sathish Rajalingam   Initial Version
-->
<!--
/*
 Change History
 **********************************************************************************************************
 Modified By			Date			Jira No.		Description								 Tag
 **********************************************************************************************************
 NA		                NA		        UTOPIA			Initial version.						 NA
 Vignesh Divakaran      22-Jul-2022     I2RT-6593       Commented Milestone checkbox and made    T01
                                                        Estimated milestone date mandatory
 Vignesh Divakaran      26-Aug-2022     I2RT-6986       Reverted commented Milestone checkbox    T02
 Vignesh Divakaran      31-Aug-2022     I2RT-6865       Pass alternate contact description       T03
                                                        to the child component
 Amit G                 25-Oct-2022     I2RT-7221       commented out the method to remove validation check       T04
 */
-->
<template>
    <div class="container-fluid es-container-fluid--grey">
        <template if:true={showSpinner}>
            <lightning-spinner class="slds-is-fixed" alternative-text="Loading" size="large"></lightning-spinner>
        </template>
         
        <template if:true={showCaseCancelModal}>
            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open es-modal-wrapper">
                <div class="slds-modal__container">
                    <div class="es-modal__content">
                        <header class="slds-modal__header es-modal__header">
                            <button class="es-button--only-icon" title="Close" onclick={hideCancelPopup}>
                                <lightning-icon icon-name="utility:close"
                                    alternative-text="close"
                                    size="xx-small" ></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>
                            <h2 class="slds-text-heading_medium slds-hyphenate">Confirm Cancellation</h2>
                        </header>
                        <div class="es-modal__faux-body">
                            <div class="es-modal__body">
                                <p>Are you sure you want to cancel case creation process?</p>
                            </div>
                        </div>
                        <footer class="es-modal__footer es-btn-grp d-flex justify-content-end">
                            <lightning-button label="No" class="es-button es-button--secondary"  onclick={hideCancelPopup}></lightning-button>
                            <lightning-button label="Yes" class="es-button es-button--secondary"  onclick={goPrevPage}></lightning-button>
                            <!-- <a href={prevPageURL} ><lightning-button label="Yes" class="es-button es-button--primary"></lightning-button></a> -->
                        </footer>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>

        <template if:true={technicalCaseInfo}>
            <div class="container">
                <h2 class="es-page__heading">
                    <lightning-button-icon variant="container" size="medium" icon-name="utility:chevronleft" title="Back" onclick={backButton}></lightning-button-icon>
                    Create a New Case
                </h2>
                <div class="row">
                    <div class="col-md-12">
                        <c-es-case-creation-filled filled-step="1" filled-label="Case Type" filled-value="Technical"></c-es-case-creation-filled>
                                                   
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-7">
                        <div class="es-case-wrapper">
                            <h3 class="es-case__heading"> <span class="es-case__step es-case__step--active">2</span> Product Information</h3>
                            <div class="es-case-section">
                                <div class="row">
                                    <div class="col-md-12">
                                        <form class="es-form">
                                            <div class="form-row">
                                                <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                    <lightning-combobox
                                                        name="supportAccount"
                                                        label="Support Account Name"
                                                        placeholder="Select your support account"
                                                        value={selectedSupportAccount}
                                                        options={supportAccounts}
                                                        onchange={handleAccountSelect}
                                                        required
                                                        readonly>
                                                    </lightning-combobox>
                                                </div>
                                            </div>
                                            <template if:true={isCaseCountVisible}>
                                                <div class="form-row">
                                                    <div class="col-md-5">
                                                        <p class="es-card__note">
                                                            <span>{caseCountString}</span>
                                                            <a onclick={handleUpgradeMessage} class="es-card__note--link">Upgrade</a>
                                                        </p>
                                                    </div>
                                                </div>
                                            </template>
                                            <div class="form-row form-group es-form-group es-lds-form-group">
                                                <div class="col-md-6">
                                                    <lightning-combobox
                                                        name="productDetails"
                                                        label="Product"
                                                        placeholder="Select your product details"
                                                        options={products}
                                                        value={selectedProduct}
                                                        onchange={handleProductSelect}
                                                        required
                                                        disabled={disableFields}>
                                                    </lightning-combobox>
                                                 <!--<T04-->  <!-- <template if:true={showUnentitledMessage}>	
                                                        <label class="warning">The selected product is not part of your entitlement</label>	
                                                    </template>-->
                                                </div>
                                                <template if:true={showDeliveryMethod}>
                                                    <div class="col-md-6">
                                                        <lightning-combobox
                                                            name="deliveryMethod"
                                                            label="Delivery Method"
                                                            placeholder="Select delivery method"
                                                            options={deliveryMethods}
                                                            value={selectedDeliveryMethod}
                                                            onchange={handleDeliveryMethod}
                                                            required
                                                            disabled={disableDeliveryMethod}
                                                            field-level-help={label.eSupport_Delivery_Method_Help_Text}>
                                                        </lightning-combobox>
                                                    </div>
                                                </template>
                                            </div>
                                            <template if:true={showVersion}>
                                                <div class="form-row form-group es-form-group es-lds-form-group">
                                                    <div class="col-md-6">
                                                        <lightning-combobox
                                                            name="productVersion"
                                                            label="Product Version"
                                                            placeholder="Select your product version"
                                                            options={versions}
                                                            value={selectedVersion}
                                                            onchange={handleVersionChange}
                                                            required
                                                            disabled={disableFields}>
                                                        </lightning-combobox>
                                                    </div>
                                                </div>
                                            </template>

                                            <template if:true={isInfoTrue}>
                                                <div class="es-case__note es-case__note--help col-md-12">
                                                    Having trouble locating the right product. Click Here to see all Informatica Products
                                                </div>
                                            </template>
                                            <div class="form-row form-group es-form-group es-lds-form-group" if:true={showHosted}>
                                                <div class="col-md-6">
                                                <template if:false={ShowOrgtxtId}>
                                                    <lightning-combobox
                                                        name="orgName"
                                                        label="Org ID"
                                                        placeholder="Select your org name"
                                                        options={orgs}
                                                        value={selectedOrg}
                                                        onchange={hadleOrgChange}
                                                        required
                                                        disabled={disableFields}>
                                                    </lightning-combobox>
                                                </template>
                                                <template if:true={ShowOrgtxtId}>
                                                    <lightning-input type="text" label="Org ID" disabled={disableFields}  value={ManualOrgId} onchange={handleManualOrgOrgChange}  required="true" ></lightning-input>
                                                </template>
                                                    <lightning-input class="mt-2" type="checkbox" label="Add Org ID Manually" disabled={disableFields} value={isOrgValue} onchange={handlechkBoxOrgChange} checked={ShowOrgtxtId}></lightning-input>
                                                </div>
                                                <div class="col-md-6">
                                                    <lightning-input type="text" name="Agent" label="Secure Agent" value={secureAgent} placeholder="Enter agent detail" onchange={handleSecureAgentChange} disabled={disableFields}>                                                    
                                                    </lightning-input>                                                
                                                </div>
                                                <template if:true={showBanner}>
                                                    <c-es-org-outage-banner support-account-id={selectedOrg} message="true"> </c-es-org-outage-banner>
                                                </template>
                                            </div>
                                            
                                            <div class="form-row" if:true={showHostedRelated}> 
                                                <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                    <lightning-combobox
                                                        name="activityType"
                                                        label="Activity Type"
                                                        placeholder="Select activity type"
                                                        options={activities}
                                                        value={selectedActivity}
                                                        onchange={handleActivityChange}
                                                        required
                                                        disabled={disableFields}>
                                                    </lightning-combobox>
                                                </div>
                                                <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                    <lightning-combobox
                                                        name="environmentType"
                                                        label="Environment Type"
                                                        placeholder="Select environment type"
                                                        options={environments}
                                                        value={selectedEnvironment}
                                                        onchange={handleEnvironmentChange}
                                                        required="true"
                                                        disabled={disableFields}>
                                                    </lightning-combobox>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                    <lightning-combobox
                                                        name="priority"
                                                        label="Priority"
                                                        placeholder="Select priority"
                                                        options={priorities}
                                                        value={selectedPriority}
                                                        onchange={handlePriorityChange}
                                                        required
                                                        disabled={disableFields}>
                                                    </lightning-combobox>
                                                </div>
                                            </div>
                                            <template if:true={showBusinessImpact}>
                                                <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                        <lightning-combobox
                                                            name="businessImpact"
                                                            label="Business Impact"
                                                            placeholder="Select Business Impact"
                                                            value={selectedImpact}
                                                            options={optionsTemp}
                                                            onchange={handleImpactChange}
                                                            required
                                                            disabled={disableFields}>
                                                        </lightning-combobox>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <lightning-input class='milestone-checkbox' label="This may impact an upcoming milestone" type="checkbox" onchange={handleTick} checked={impactCheckbox} disabled={disableFields}>
                                                    </lightning-input>
                                                </div>
                                                <template if:true={doesImpactMilestone}>
                                                    <div class="form-row">
                                                        <div class="form-group es-form-group es-lds-form-group col-md-5">
                                                            <lightning-input type="date" name="estimatedMilestoneDate" label="Estimated Date for the Milestone" value={selectedEstimateDate} onchange={handleDateChange} disabled={disableFields}
                                                            min={todayDate}  message-when-bad-input="Please enter a valid time in future"
                                                             message-when-range-underflow="Please enter a valid time in future"></lightning-input>
                                                        </div>
                                                    </div>
                                                </template>
                                            </template>

                                            <!--Operations Case: Show Session Slots fields-->
                                            <template if:true={showSessionDate}>
                                                <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                        <label class="es-form-label">Preferred Window of Activity</label>
                                                        <lightning-helptext class="es-tooltip" content="Please mention the time suitable to make the update"></lightning-helptext>
                                                    </div> 
                                                    <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                        <label class="es-form-label">Time Zone: {userTimeZone}</label>
                                                    </div>
                                                </div>
    
                                                <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-6">       
                                                        <lightning-combobox
                                                            name="SessionDate"
                                                            label="Select a date"
                                                            placeholder="Please select a date"
                                                            options={availableDates}
                                                            value={selectedDate}
                                                            onchange={handleDateSelect}
                                                            required>
                                                        </lightning-combobox>
                                                    </div>
                                                    <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                        <lightning-combobox
                                                            name="availableSlots"
                                                            label="Available Slots"
                                                            placeholder="Select a slot"
                                                            options={availableSlots}
                                                            value={selectedSlot}
                                                            onchange={handleSlotSelect}
                                                            required>
                                                        </lightning-combobox>
                                                    </div>
                                                </div>  
                                            </template>

                                            <!-- <div class="form-row">
                                                <div class="form-group es-form-group es-lds-form-group col-md-5">
                                                    <lightning-combobox
                                                        name="relatedComponent"
                                                        label="Related Component"
                                                        placeholder="Select related component"
                                                        options={productComponents}
                                                        value={selectedProductComponent}
                                                        onchange={handleComponentChange}
                                                        required>
                                                    </lightning-combobox>
                                                </div>
                                            </div> -->
                                            <h3 class="es-case__heading es-case__heading--with-border mt-3">
                                                <lightning-button-icon variant="container" size="medium" icon-name={iconNameCaseInfo} onclick={handleToggleCaseInfo}></lightning-button-icon>
                                                Case Information
                                            </h3>
                                            <template if:true={buttonClickedCaseInfo}>
                                                <!-- <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-5">
                                                        <lightning-combobox
                                                            name="priority"
                                                            label="Priority"
                                                            placeholder="Select priority"
                                                            options={priorities}
                                                            value={selectedPriority}
                                                            onchange={handlePriorityChange}
                                                            required
                                                            disabled={disableFields}>
                                                        </lightning-combobox>
                                                    </div>
                                                </div>
                                                <template if:true={showBusinessImpact}>
                                                    <div class="form-row">
                                                        <div class="form-group es-form-group es-lds-form-group col-md-5">
                                                            <lightning-combobox
                                                                name="businessImpact"
                                                                label="Business Impact"
                                                                placeholder="Select Business Impact"
                                                                value={selectedImpact}
                                                                options={optionsTemp}
                                                                onchange={handleImpactChange}
                                                                required
                                                                disabled={disableFields}>
                                                            </lightning-combobox>
                                                        </div>
                                                    </div>
                                                    <div class="form-row">
                                                        <lightning-input class='milestone-checkbox' label="This may impact an upcoming milestone" type="checkbox" onchange={handleTick} checked={impactCheckbox} disabled={disableFields}>
                                                        </lightning-input>
                                                    </div>
                                                    <template if:true={doesImpactMilestone}>
                                                        <div class="form-row">
                                                            <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                                <lightning-input type="date" name="estimatedMilestoneDate" label="Estimated Date for the Milestone" value={selectedEstimateDate} onchange={handleDateChange} disabled={disableFields}></lightning-input>
                                                            </div>
                                                        </div>
                                                    </template>               
                                                </template> -->
                                                <!-- <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-8">
                                                        <lightning-textarea name="issueSummary" label="Issue Summary" value={issueSummary} placeholder="Describe Issue Summary." onchange={handleIssueSummaryChange}></lightning-textarea>                                                    
                                                    </div>
                                                </div> -->
                                                <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-8">
                                                        <lightning-input type="text" name="Subject" label="Subject" value={subject} placeholder="Enter subject" onchange={handleSubjectChange} onblur={handleProcessCaseDescQualityIndicator} required disabled={disableFields}>                                                    
                                                        </lightning-input> 
                                                    </div>
                                                </div>
                                                <div class="form-row">                             
                                                    <div class="form-group es-form-group es-lds-form-group es-lds-form-group--small col-md-8">  
                                                        <lightning-textarea name="errorMsg" label="Error Message" value={errorMessage} placeholder="Copy-paste the error message" onchange={handleErrorMessageChange} onblur={handleProcessCaseDescQualityIndicator} disabled={disableFields}></lightning-textarea>
                                                    </div>
                                                </div>
                                                <div class="form-row form-group es-form-group es-lds-form-group es-lds-form-group--big">                                
                                                    <div class="col-md-8">
                                                        <lightning-textarea 
                                                            name="description" 
                                                            label="Description" 
                                                            onchange={handleDescriptionChange}
                                                            onblur={handleProcessCaseDescQualityIndicator}
                                                            value={description}
                                                            placeholder={placeholdertext}
                                                            required 
                                                            disabled={disableFields}>
                                                        </lightning-textarea>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <template if:true={isQIAvailable}>
                                                            <div class="es-form-desc mt-4">
                                                                <!-- <template if:false={boolDetailDesc}>
                                                                <p class="es-form-criteria">
                                                                    <span data-id="detailDesc" class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                            <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                        </svg>
                                                                    </span>
                                                                    <span class="es-form-criteria__text">Detailed description</span>
                                                                </p>   
                                                                </template>
                                                                <template if:true={boolDetailDesc}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="detailDesc" class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Detailed description</span>
                                                                    </p>   
                                                                </template> -->

                                                                <template if:false={boolProblemSymptom}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="problemSymptom" class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <!-- <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path> -->
                                                                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Problem symptoms</span>
                                                                        <span class="es-form-criteria__sub-text">{problemSymptomExample}</span>
                                                                    </p>
                                                                </template>
                                                                <template if:true={boolProblemSymptom}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="problemSymptom" class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Problem symptoms</span>
                                                                    </p>
                                                                </template>

                                                                <template if:false={boolComponent}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="detailDesc" class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <!-- <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path> -->
                                                                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Component</span>
                                                                        <span class="es-form-criteria__sub-text">{componentExample}</span>
                                                                    </p>   
                                                                </template>
                                                                <template if:true={boolComponent}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="detailDesc" class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Component</span>
                                                                    </p>   
                                                                </template>

                                                                <template if:false={boolErrorMessage}>
                                                                    <p class="es-form-criteria" data-id="errorMessage">
                                                                        <span class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <!-- <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path> -->
                                                                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Error Message</span>
                                                                        <span class="es-form-criteria__sub-text">{errorMessageExample}</span>
                                                                    </p>
                                                                </template>
                                                                <template if:true={boolErrorMessage}>
                                                                    <p class="es-form-criteria" data-id="errorMessage">
                                                                        <span class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Error Message</span>
                                                                    </p>
                                                                </template>

                                                                <template if:false={boolActionTaken}>
                                                                    <p class="es-form-criteria" data-id="actionTaken">
                                                                        <span class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <!-- <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path> -->
                                                                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Action taken</span>
                                                                        <span class="es-form-criteria__sub-text">{actionTakenExample}</span>
                                                                    </p>
                                                                </template>
                                                                <template if:true={boolActionTaken}>
                                                                    <p class="es-form-criteria" data-id="actionTaken">
                                                                        <span class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Action taken</span>
                                                                    </p>
                                                                </template>
                                                                
                                                                <template if:false={boolAdditionalDetails}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="detailDesc" class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <!-- <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path> -->
                                                                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Additional Details</span>
                                                                        <span class="es-form-criteria__sub-text">{additionalDetailsExample}</span>
                                                                    </p>   
                                                                </template>
                                                                <template if:true={boolAdditionalDetails}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="detailDesc" class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Additional Details</span>
                                                                    </p>   
                                                                </template>
                                                                
                                                                <template if:false={boolIncidentTime}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="incidentTime" class="es-form-criteria__tick es-form-criteria__tick--disabled">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <!-- <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path> -->
                                                                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Incident Time</span>
                                                                        <span class="es-form-criteria__sub-text">{incidentTimeExample}</span>
                                                                    </p>
                                                                </template>
                                                                <template if:true={boolIncidentTime}>
                                                                    <p class="es-form-criteria">
                                                                        <span data-id="incidentTime" class="es-form-criteria__tick">
                                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"></path>
                                                                            </svg>
                                                                        </span>
                                                                        <span class="es-form-criteria__text">Incident Time</span>
                                                                    </p>
                                                                </template>
                                                                
                                                                
                                                            </div>                           
                                                        </template>
                                                    </div>
                                                    <template if:true={isQIAvailable}>
                                                        <div data-id="strengthIndicator">
                                                            <div class="d-inline-flex" >
                                                                <p class="es-case-info__label">Strength</p>
                                                                <template if:true={isInRed}>
                                                                    <div class="es-strength-slider-width">
                                                                        <div style={showPercentage} class="es-strength-variation es-case-summary__strength-indicator--red" data-id="strengthBar"></div>
                                                                    </div>    
                                                                </template>
                                                                <template if:true={isInAmber}>
                                                                    <div class="es-strength-slider-width">
                                                                        <div style={showPercentage} class="es-strength-variation es-case-summary__strength-indicator--amber" data-id="strengthBar"></div>
                                                                    </div>    
                                                                </template>
                                                                <template if:true={isInGreen}>
                                                                    <div class="es-strength-slider-width">
                                                                        <div style={showPercentage} class="es-strength-variation es-case-summary__strength-indicator--green" data-id="strengthBar"></div>
                                                                    </div>    
                                                                </template>
                                                                <div data-id="score" class="es-case-summary__strength-indicator-percentage">{qualityScore}</div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </div>
                                                <!-- <div class="form-row">
                                                    <div class="col-md-12">
                                                        <label class="es-form-label">Preferred Window of Activity</label>
                                                        <lightning-helptext class="es-tooltip" content="Please mention the time suitable to make the update"></lightning-helptext>
                                                    </div> 
                                                </div> 
                                                <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-6">
                                                        <lightning-input type="date" name="date" label="Select a date" ></lightning-input>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="form-group es-form-group es-lds-form-group col-md-8 es-lds-chip">
                                                        <lightning-radio-group name="radioGroup"
                                                            label="Privilege"
                                                            options={options}
                                                            value={value}
                                                            type="radio">
                                                        </lightning-radio-group>
                                                    </div>
                                                </div> -->
                                            </template>
                                        </form> 
                                        <div class="es-btn-grp d-flex justify-content-end">
                                            <lightning-button label="Cancel" class="es-button es-button--secondary" onclick={showCancelpopup}></lightning-button>
                                            <a href={prevPageURL}><lightning-button label="Go Back" class="es-button es-button--secondary"></lightning-button></a>
                                            <lightning-button label="Proceed" class={proceedButtonCSS} onclick={showAdditionalInfoTechnical} disabled={disableFields}></lightning-button>
                                            <!-- <a href={proceedUrl}><lightning-button label="Proceed" class="es-button es-button--primary"></lightning-button></a> -->
                                        </div>
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <c-es-sidebar-setb show-last-values=false essidebarsetbsearch={triggerforsearch} essidebarsetbplacedin={placedin}></c-es-sidebar-setb><!-- Property added for Case Deflection Search -->
                    </div>
                </div>
            </div>
        </template>
        <template if:true={additionalInfoTechnical}>
            <div class="container">
                <h2 class="es-page__heading">
                    <lightning-button-icon variant="container" size="medium" icon-name="utility:chevronleft" title="Back"></lightning-button-icon>
                    Create a New Case
                </h2>
                <div class="row">
                    <div class="col-md-12">
                        <c-es-case-creation-filled filled-step="1" filled-label="Case Type" filled-value="Technical"></c-es-case-creation-filled>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">

                        <c-es-case-creation-filled filled-step="2" filled-label="Case Information" filled-value={caseInformation}></c-es-case-creation-filled>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="es-case-wrapper">
                            <h3 class="es-case__heading"> <span class="es-case__step es-case__step--active">3</span> Additional Case Information</h3>
                            <div class="es-case-section">
                                <div class="row">
                                    <div class="col-md-12">
                                        <form class="es-form">
                                            <!-- As per I2RT-2550, Problem Type field should not be shown to Customer on Community Page -->
                                           <!--  <div class="form-row">
                                                <div class="form-group es-form-group es-lds-form-group col-md-5">
                                                    <lightning-combobox
                                                        name="problemType"
                                                        label="Problem Type"
                                                        placeholder="Select Problem Type"
                                                        options={problemTypes}
                                                        value={selectedProblemType}
                                                        onchange={handleProblemTypeChange}>
                                                    </lightning-combobox>
                                                </div>
                                            </div> -->
                                            <div class="form-row">                                
                                                <div class="form-group es-form-group es-lds-form-group es-lds-file-select col-md-6">
                                                    <lightning-file-upload
                                                        label="Attach Files (Upload limit is 2GB)"
                                                        name="fileUploader"
                                                        accept={acceptedFormats}
                                                        record-id={contactId}
                                                        onuploadfinished={handleUploadFinished}
                                                        multiple>
                                                    </lightning-file-upload>
                                                    <!-- <p><span class="es-case-addnl-info__icon">+</span>Add Files</p> -->
                                                </div>
                                            </div>
                                            <template if:true={showUploadedFiles}>
                                                <div data-id="uploadedAttachments">
                                                    <div class="table-responsive">
                                                        <table class="table es-table">
                                                            <thead>
                                                            <tr>
                                                                <th scope="col">Name</th>
                                                                <th scope="col">Content Type</th>
                                                                <th scope="col">&nbsp;</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                                <template for:each={uploadedFiles} for:item="attachments">
                                                                    <tr key={attachments.id}>                                      
                                                                        <td><a style="text-decoration: underline;color: steelblue;" data-id={attachments.ContentDocumentId} onclick={downloadDoc}>{attachments.ContentDocument.Title}</a></td>
                                                                        <td>{attachments.ContentDocument.FileType}</td>
                                                                        <td class="es-button--icon-in-table text-right">
                                                                            <lightning-button-icon variant="container" size="x-small" icon-name="utility:delete" title="delete" value={attachments.ContentDocumentId} onclick={removeAttachment}></lightning-button-icon>
                                                                        </td>
                                                                    </tr>
                                                                </template>
                                                            </tbody>
                                                        </table> 
                                                    </div> 
                                                </div>
                                            </template>
                                            <div class="es-kb-log-recommendation slds-hide">
                                                <!-- <template if:true={showKbLogRecommendation}> -->
                                                    <p class="es-form-label">Recommended logs to attach to this case</p>                                 
                                                    <div class="es-kb-recommended-wrapper es-kb-recommended-wrapper--lg">
                                                        <!-- <div class="d-flex justify-content-between align-items-center">
                                                            <h4 class="es-kb-recommended__title">
                                                                <lightning-icon icon-name="utility:page"
                                                                                size="xx-small" 
                                                                                class="es-icon-space-right--small">
                                                                </lightning-icon>
                                                            </h4>
                                                            <img src={maximize} alt="maximize"/> 
                                                        </div> -->
                                                        <!-- <div class="es-kb-recommended__info">
                                                            <span class="es-sidebar__tag">Knowledge Base</span>
                                                            <span class="es-kb-recommended__date">6 Dec 2020</span> 
                                                        </div> -->
                                                        <div class="es-kb-recommended__desc-section">
                                                            <p class="es-kb-recommended__desc">
                                                                <!-- Filter the Integration Service (IS) log, Repository Service (RS) log, and domain log for the interval of session failure (from 2 min before the start of the session to 2 min after the failure of the session) by applying the custom filter as per the article HOW TO: Generate Domain and any Service Logs in the Administration Console (KB 496924). -->
                                                            </p>
                                                            <p><a href={kbUrl} target="_blank">Read More</a></p>
                                                        </div>
                                                    </div>
                                                <!-- </template> -->
                                            </div>
                                        </form>
                                        <div class="es-btn-grp d-flex justify-content-end">
                                            <lightning-button label="Cancel" class="es-button es-button--secondary" onclick={showCancelpopup}></lightning-button>
                                            <lightning-button label="Go Back" class="es-button es-button--secondary" onclick={backToTechnicalCaseInfo}></lightning-button>
                                            <lightning-button label="Proceed" class="es-button es-button--primary" onclick={showAlternateContact}></lightning-button>
                                        </div>
                                        <template if:true={isAttachmentDeletePopup}>
                                            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open es-modal-wrapper">
                                                <div class="slds-modal__container">
                                                    <div class="es-modal__content">
                                                        <header class="slds-modal__header es-modal__header">
                                                            <button class="es-button--only-icon" title="Close" onclick={cancelFileRemove}>
                                                                <lightning-icon icon-name="utility:close"
                                                                    alternative-text="close"
                                                                    size="xx-small" ></lightning-icon>
                                                                <span class="slds-assistive-text">Close</span>
                                                            </button>
                                                            <h2 class="slds-text-heading_medium slds-hyphenate">Confirm Delete</h2>
                                                        </header>
                                                        <div class="es-modal__faux-body">
                                                            <div class="es-modal__body">
                                                                <p>Are you sure you want to delete this document?</p>
                                                            </div>
                                                        </div>
                                                        <footer class="es-modal__footer es-btn-grp d-flex justify-content-end">
                                                            <lightning-button label="No" class="es-button es-button--secondary"  onclick={cancelFileRemove}></lightning-button>
                                                            <lightning-button label="Yes" class="es-button es-button--primary"  onclick={confirmFileRemove}></lightning-button>		
                                                        </footer>
                                                    </div>
                                                </div>
                                            </section>
                                            <div class="slds-backdrop slds-backdrop_open"></div>
                                        </template>
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
        <template if:true={alternateContactInfo}>
            <c-es-case-creation-alternate-contact selected-account={selectedSupportAccount} show-additional-case-information="true" oncancel={showCancelpopup} ongoback={backToAdditionalInfoTechnical} onproceed={showFinalSummaryPage} case-information={caseInformation} case-attachment-number={fileSize} case-type="Technical" related-contacts={relatedContacts} preselected-contacts={selectedContactList} contact-list={allContactData} str-alternate-contacts-description={strAlternateContactsDescription}></c-es-case-creation-alternate-contact> <!-- <T03> -->
        </template>
        <template if:true={finalSummaryCase}>
            <c-es-case-creation-summary case-type="Technical" case-information={caseInformation} oncancel={showCancelpopup} file-size={fileSize} alternate-contact={alternateContact} show-additional-case-information="true" show-product="true" case-info={caseInfoToSave} onconfirmcasecreate={saveCase} onbacktoalternatecontact={backToAlternateContact} case-response-time={caseResponseTime} contact-list={allContactData}></c-es-case-creation-summary>            
        </template>
        <template if:true={showCaseDetails}>
            <c-es-case-details case-info={caseInfo} case-contacts={caseContacts} case-documents={caseDocuments} ></c-es-case-details>
        </template>    
    </div>
    <div class="container-fluid es-container-fluid--grey-with-border-big">
        <div class="container mb-2">
        <h4 class="es-sidebar__heading--big text-center pt-2">Alternate ways to resolve your issues</h4>
        <ul class="link-option-vanilla-wrapper d-md-flex justify-content-center">
            <template if:true={showChatButton}>
                <li class="link-option-vanilla__item link-option-vanilla__item--horizontal">
                    <a onclick={handleStartChat} class="es-box-clickable">
                        <div>
                            <span class="link-option-vanilla__img"><img src={liveAgent} alt="live agent" /></span>
                            <span class="link-option-vanilla__text">Chat with a Live Agent</span>
                            <span class="float-right"><lightning-button-icon variant="container" size="x-small" icon-name="utility:chevronright" ></lightning-button-icon></span>
                            <span class="link-option-vanilla__text-available--active">Online</span>
                        </div>
                    </a>
                </li>
            </template>
            <!-- <template if:false={showChatButton}>
                <li class="link-option-vanilla__item link-option-vanilla__item--horizontal">
                    <a class="disableClick">
                        <span class="link-option-vanilla__img"><img src={liveAgent} alt="live agent" /></span>
                        <span class="link-option-vanilla__text">Chat with a Live Agent</span>
                        <span class="float-right"><lightning-button-icon variant="container" size="x-small" icon-name="utility:chevronright" disabled="true" onclick={handleStartChat} ></lightning-button-icon></span>
                    </a>
                </li>
            </template>     -->
            <li class="link-option-vanilla__item link-option-vanilla__item--horizontal es-box-clickable" >
                <a href={askCommunityLink} target="_blank" class="es-box-clickable">
                    <div>
                        <span class="link-option-vanilla__img"><img src={postQuestions} alt="post questions" /></span>
                        <span class="link-option-vanilla__text">Post your question to our community</span>
                        <span class="float-right"><lightning-button-icon variant="container" size="x-small" icon-name="utility:chevronright"></lightning-button-icon></span>
                    </div>
                </a>
            </li>
        </ul>
    </div>
    </div>
</template>